<view class="container">
  <!-- é¡¶éƒ¨æœç´¢æ  -->
  <view class="search-container">
    <view class="search-bar">
      <view class="search-icon">ğŸ”</view>
      <input class="search-input" placeholder="æœç´¢ä¹¦åŸä¹¦ç±" bindinput="onSearchInput" value="{{searchKey}}" />
      <view class="search-clear" bindtap="clearSearch" wx:if="{{searchKey}}">âœ–</view>
    </view>
  </view>

  <!-- åˆ†ç±»æ  -->
  <scroll-view class="category-scroll" scroll-x="true" enhanced="true" show-scrollbar="false">
    <view class="category-list">
      <view 
        wx:for="{{categories}}" 
        wx:key="index" 
        class="category-item {{currentCategory === item ? 'active' : ''}}" 
        bindtap="selectCategory" 
        data-category="{{item}}">
        {{item}}
      </view>
    </view>
  </scroll-view>

  <!-- åŠ è½½ä¸­æç¤º -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- æ— æ•°æ®æç¤º -->
  <view class="empty-tip" wx:if="{{!loading && filteredBooks.length === 0}}">
    <image class="empty-image" src="/images/icons/book_black.png" mode="aspectFit"></image>
    <view class="empty-text">æš‚æ— ç›¸å…³ä¹¦ç±</view>
  </view>

  <!-- ä¹¦ç±åˆ—è¡¨ -->
  <view class="book-grid" wx:if="{{!loading && filteredBooks.length > 0}}">
    <view class="book-item" wx:for="{{filteredBooks}}" wx:key="_id" bindtap="goToDetail" data-id="{{item._id}}">
      <view class="book-cover">
        <image wx:if="{{item.coverUrl}}" src="{{item.coverUrl}}" mode="aspectFill" />
        <view wx:else class="book-cover-placeholder">
          <text class="book-emoji">ğŸ“š</text>
        </view>
        <view class="book-downloads">{{item.downloads || 0}}æ¬¡</view>
      </view>
      <view class="book-title">{{item.title}}</view>
      <view class="book-author">{{item.author || 'ä½šå'}}</view>
    </view>
  </view>

  <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
  <view class="back-to-top" bindtap="scrollToTop" wx:if="{{showBackToTop}}">
    <text class="back-to-top-icon">â¬†ï¸</text>
  </view>
</view>